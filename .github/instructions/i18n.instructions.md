---
applyTo: "**/*.tsx"
---

# Internationalization Instructions

## Global Social Network Support

### Multi-Language Implementation for deCentra

```typescript
// i18n configuration for social network
import i18next from 'i18next';
import { initReactI18next } from 'react-i18next';
import Backend from 'i18next-http-backend';
import LanguageDetector from 'i18next-browser-languagedetector';

// Language configuration for global reach
const supportedLanguages = [
  'en',    // English (default)
  'es',    // Spanish
  'fr',    // French
  'de',    // German
  'pt',    // Portuguese
  'ru',    // Russian
  'zh',    // Chinese (Simplified)
  'zh-TW', // Chinese (Traditional)
  'ja',    // Japanese
  'ko',    // Korean
  'ar',    // Arabic
  'hi',    // Hindi
  'fa',    // Persian
  'tr',    // Turkish
  'pl',    // Polish
  'it',    // Italian
  'nl',    // Dutch
  'sv',    // Swedish
  'da',    // Danish
  'no',    // Norwegian
];

// RTL language support
const rtlLanguages = ['ar', 'fa', 'he', 'ur'];

// Initialize i18next with social network specific configuration
i18next
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    lng: 'en', // Default language
    fallbackLng: 'en',
    supportedLngs: supportedLanguages,
    
    // Namespace organization for social features
    ns: [
      'common',           // Common UI elements
      'auth',            // Authentication flows
      'social',          // Social interactions
      'content',         // Content creation/management
      'moderation',      // Moderation interface
      'monetization',    // Creator monetization
      'whistleblower',   // Whistleblower features
      'privacy',         // Privacy settings
      'accessibility',   // Accessibility features
      'errors',          // Error messages
    ],
    defaultNS: 'common',
    
    // Backend configuration for loading translations
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
      addPath: '/locales/{{lng}}/{{ns}}.missing.json',
    },
    
    // Language detection options
    detection: {
      order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],
      lookupQuerystring: 'lng',
      lookupCookie: 'decentra_language',
      lookupLocalStorage: 'decentra_language',
      caches: ['localStorage', 'cookie'],
    },
    
    // Interpolation options for dynamic content
    interpolation: {
      escapeValue: false, // React already escapes
      formatSeparator: ',',
      format: function(value, format, lng) {
        // Custom formatters for social network content
        if (format === 'timeAgo') return formatTimeAgo(value, lng);
        if (format === 'number') return formatNumber(value, lng);
        if (format === 'currency') return formatCurrency(value, lng);
        if (format === 'relative') return formatRelativeTime(value, lng);
        return value;
      }
    },
    
    // Pluralization for different languages
    pluralSeparator: '_',
    contextSeparator: '_',
    
    // Performance options
    load: 'languageOnly', // Don't load country-specific variants initially
    preload: ['en'], // Preload default language
    
    // Development options
    debug: process.env.NODE_ENV === 'development',
    saveMissing: process.env.NODE_ENV === 'development',
    
    // React-specific options
    react: {
      useSuspense: true,
      bindI18n: 'languageChanged loaded',
      bindI18nStore: 'added removed',
      transEmptyNodeValue: '',
      transSupportBasicHtmlNodes: true,
      transKeepBasicHtmlNodesFor: ['br', 'strong', 'i', 'em'],
    },
  });

export default i18next;
```

### Social Network Translation Keys

```json
// locales/en/social.json
{
  "feed": {
    "title": "Your Feed",
    "empty": "No posts yet. Start following people to see their content!",
    "loading": "Loading posts...",
    "loadMore": "Load more posts",
    "newPosts": "{{count}} new post",
    "newPosts_plural": "{{count}} new posts",
    "refreshFeed": "Refresh feed"
  },
  "post": {
    "create": {
      "placeholder": "What's on your mind?",
      "submit": "Post",
      "submitting": "Posting...",
      "maxLength": "{{current}}/{{max}} characters",
      "tooLong": "Post is too long. Maximum {{max}} characters allowed.",
      "empty": "Post cannot be empty",
      "success": "Post published successfully!",
      "error": "Failed to publish post. Please try again."
    },
    "actions": {
      "like": "Like",
      "liked": "Liked",
      "likeCount": "{{count}} like",
      "likeCount_plural": "{{count}} likes",
      "comment": "Comment",
      "commentCount": "{{count}} comment",
      "commentCount_plural": "{{count}} comments",
      "share": "Share",
      "shareCount": "{{count}} share",
      "shareCount_plural": "{{count}} shares",
      "tip": "Tip",
      "tipCount": "{{amount, currency}} received",
      "more": "More options",
      "edit": "Edit post",
      "delete": "Delete post",
      "report": "Report post"
    },
    "visibility": {
      "public": "Public",
      "followers": "Followers only",
      "unlisted": "Unlisted",
      "encrypted": "Encrypted"
    },
    "time": {
      "now": "now",
      "edited": "edited {{time, timeAgo}}",
      "created": "{{time, timeAgo}}"
    }
  },
  "profile": {
    "follow": "Follow",
    "following": "Following",
    "unfollow": "Unfollow",
    "followers": "{{count}} follower",
    "followers_plural": "{{count}} followers",
    "followingCount": "{{count}} following",
    "postsCount": "{{count}} post",
    "postsCount_plural": "{{count}} posts",
    "joinedDate": "Joined {{date, MMMM YYYY}}",
    "verified": "Verified",
    "bio": "Bio",
    "website": "Website",
    "location": "Location",
    "editProfile": "Edit Profile",
    "settings": "Settings",
    "block": "Block user",
    "unblock": "Unblock user",
    "mute": "Mute user",
    "unmute": "Unmute user",
    "report": "Report user"
  },
  "comments": {
    "title": "Comments",
    "empty": "No comments yet. Be the first to comment!",
    "placeholder": "Write a comment...",
    "submit": "Comment",
    "reply": "Reply",
    "replyTo": "Reply to {{username}}",
    "showReplies": "Show {{count}} reply",
    "showReplies_plural": "Show {{count}} replies",
    "hideReplies": "Hide replies",
    "loadMore": "Load more comments",
    "deleted": "This comment has been deleted"
  },
  "notifications": {
    "title": "Notifications",
    "empty": "No notifications yet",
    "markAllRead": "Mark all as read",
    "types": {
      "like": "{{user}} liked your post",
      "comment": "{{user}} commented on your post",
      "follow": "{{user}} started following you",
      "mention": "{{user}} mentioned you in a post",
      "tip": "{{user}} tipped you {{amount, currency}}",
      "repost": "{{user}} shared your post"
    },
    "time": "{{time, timeAgo}}"
  },
  "search": {
    "placeholder": "Search deCentra...",
    "users": "Users",
    "posts": "Posts",
    "topics": "Topics",
    "noResults": "No results found for \"{{query}}\"",
    "suggestions": "Try searching for:",
    "recent": "Recent searches",
    "trending": "Trending",
    "filters": {
      "all": "All",
      "people": "People",
      "posts": "Posts",
      "media": "Media",
      "verified": "Verified only"
    }
  }
}
```

```json
// locales/en/whistleblower.json
{
  "identity": {
    "anonymous": "Anonymous",
    "protected": "Identity Protected",
    "verified": "Verified Source",
    "warning": "Your identity is completely anonymous and protected"
  },
  "submission": {
    "title": "Submit Confidential Report",
    "description": "Report wrongdoing safely and anonymously",
    "content": {
      "label": "Report Details",
      "placeholder": "Describe the incident, including what happened, when, where, and who was involved. Avoid including identifying information about yourself.",
      "guidelines": "Guidelines for safe reporting:",
      "guideline1": "Use general timeframes instead of specific dates",
      "guideline2": "Describe locations generally, not specific addresses",
      "guideline3": "Use job titles instead of specific names when possible"
    },
    "urgency": {
      "label": "Urgency Level",
      "low": "Standard - Non-urgent matter",
      "medium": "Time-sensitive - Action needed soon",
      "high": "Urgent - Immediate attention required",
      "critical": "Critical - Life-threatening situation"
    },
    "evidence": {
      "label": "Supporting Evidence",
      "description": "Upload documents or images that support your report. All metadata will be automatically removed.",
      "dragDrop": "Drag and drop files here, or click to select",
      "maxSize": "Maximum file size: {{size}}",
      "allowedTypes": "Allowed types: {{types}}"
    },
    "encryption": {
      "title": "Security Notice",
      "description": "Your report will be encrypted and can only be accessed by verified journalists and authorities.",
      "guarantee": "We guarantee your anonymity will be protected."
    },
    "submit": "Submit Confidential Report",
    "submitting": "Encrypting and submitting...",
    "success": {
      "title": "Report Submitted Successfully",
      "message": "Your confidential report has been submitted and encrypted. Verified journalists and authorities will review it.",
      "reference": "Reference ID: {{id}}",
      "security": "Your identity remains completely anonymous and protected."
    }
  },
  "access": {
    "restricted": "This content requires verified journalist access",
    "verifying": "Verifying your credentials...",
    "verified": "Access granted - Verified journalist",
    "denied": "Access denied - Verification required"
  }
}
```

### RTL Language Support

```typescript
// RTL language detection and styling
export function useRTLSupport() {
  const { i18n } = useTranslation();
  const isRTL = rtlLanguages.includes(i18n.language);

  useEffect(() => {
    // Update document direction
    document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
    document.documentElement.lang = i18n.language;
  }, [isRTL, i18n.language]);

  return { isRTL };
}

// RTL-aware component styling
export function RTLAwarePostCard({ post }: { post: Post }) {
  const { t } = useTranslation('social');
  const { isRTL } = useRTLSupport();

  return (
    <article 
      className={`bg-white rounded-lg shadow-sm border ${
        isRTL ? 'text-right' : 'text-left'
      }`}
      dir={isRTL ? 'rtl' : 'ltr'}
    >
      <header className={`p-4 border-b flex items-center ${
        isRTL ? 'space-x-reverse space-x-3' : 'space-x-3'
      }`}>
        <UserAvatar user={post.author} className="flex-shrink-0" />
        <div className={`min-w-0 flex-1 ${isRTL ? 'text-right' : 'text-left'}`}>
          <h3 className="font-semibold text-gray-900 truncate">
            {post.author.displayName || post.author.username}
          </h3>
          <time className="text-sm text-gray-500">
            {t('post.time.created', { time: post.createdAt })}
          </time>
        </div>
      </header>
      
      <div className="p-4">
        <p className={`text-gray-900 whitespace-pre-wrap ${
          isRTL ? 'text-right' : 'text-left'
        }`}>
          {post.content}
        </p>
      </div>
      
      <footer className={`p-4 border-t bg-gray-50 flex items-center ${
        isRTL ? 'justify-start space-x-reverse space-x-4' : 'justify-between space-x-4'
      }`}>
        <EngagementButton
          type="like"
          count={post.likesCount}
          label={t('post.actions.like')}
          isRTL={isRTL}
        />
        <EngagementButton
          type="comment"
          count={post.commentsCount}
          label={t('post.actions.comment')}
          isRTL={isRTL}
        />
      </footer>
    </article>
  );
}
```

### Dynamic Language Switching

```typescript
// Language selector component
export function LanguageSelector() {
  const { i18n } = useTranslation();
  const [isOpen, setIsOpen] = useState(false);

  const languages = [
    { code: 'en', name: 'English', nativeName: 'English' },
    { code: 'es', name: 'Spanish', nativeName: 'Español' },
    { code: 'fr', name: 'French', nativeName: 'Français' },
    { code: 'de', name: 'German', nativeName: 'Deutsch' },
    { code: 'pt', name: 'Portuguese', nativeName: 'Português' },
    { code: 'ru', name: 'Russian', nativeName: 'Русский' },
    { code: 'zh', name: 'Chinese (Simplified)', nativeName: '简体中文' },
    { code: 'zh-TW', name: 'Chinese (Traditional)', nativeName: '繁體中文' },
    { code: 'ja', name: 'Japanese', nativeName: '日本語' },
    { code: 'ko', name: 'Korean', nativeName: '한국어' },
    { code: 'ar', name: 'Arabic', nativeName: 'العربية' },
    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी' },
    { code: 'fa', name: 'Persian', nativeName: 'فارسی' },
    { code: 'tr', name: 'Turkish', nativeName: 'Türkçe' },
  ];

  const currentLanguage = languages.find(lang => lang.code === i18n.language) || languages[0];

  const handleLanguageChange = async (languageCode: string) => {
    try {
      await i18n.changeLanguage(languageCode);
      setIsOpen(false);
      
      // Save preference
      localStorage.setItem('decentra_language', languageCode);
      
      // Update document attributes for accessibility
      document.documentElement.lang = languageCode;
      
      // Analytics tracking (privacy-preserving)
      analytics.track('language_changed', {
        from: currentLanguage.code,
        to: languageCode,
      });
    } catch (error) {
      console.error('Failed to change language:', error);
    }
  };

  return (
    <div className="relative">
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        aria-label="Select language"
        aria-expanded={isOpen}
        aria-haspopup="listbox"
      >
        <GlobeAltIcon className="h-4 w-4 mr-2" />
        {currentLanguage.nativeName}
        <ChevronDownIcon className="h-4 w-4 ml-2" />
      </button>

      {isOpen && (
        <div className="absolute right-0 mt-2 w-64 bg-white shadow-lg rounded-md border border-gray-200 z-50 max-h-64 overflow-y-auto">
          <div className="py-1" role="listbox">
            {languages.map((language) => (
              <button
                key={language.code}
                onClick={() => handleLanguageChange(language.code)}
                className={`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 flex items-center justify-between ${
                  language.code === i18n.language ? 'bg-blue-50 text-blue-700' : 'text-gray-900'
                }`}
                role="option"
                aria-selected={language.code === i18n.language}
              >
                <div>
                  <div className="font-medium">{language.nativeName}</div>
                  <div className="text-xs text-gray-500">{language.name}</div>
                </div>
                {language.code === i18n.language && (
                  <CheckIcon className="h-4 w-4 text-blue-600" />
                )}
              </button>
            ))}
          </div>
        </div>
      )}
    </div>
  );
}
```

### Cultural Considerations

```typescript
// Cultural adaptation utilities
export class CulturalAdaptation {
  // Date and time formatting based on locale
  static formatDate(date: Date | number, locale: string): string {
    const dateObj = typeof date === 'number' ? new Date(date) : date;
    
    return new Intl.DateTimeFormat(locale, {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    }).format(dateObj);
  }

  static formatTime(date: Date | number, locale: string): string {
    const dateObj = typeof date === 'number' ? new Date(date) : date;
    
    return new Intl.DateTimeFormat(locale, {
      hour: '2-digit',
      minute: '2-digit',
    }).format(dateObj);
  }

  // Number formatting for different locales
  static formatNumber(number: number, locale: string): string {
    return new Intl.NumberFormat(locale).format(number);
  }

  // Currency formatting for monetization features
  static formatCurrency(amount: number, locale: string, currency: string = 'USD'): string {
    return new Intl.NumberFormat(locale, {
      style: 'currency',
      currency: currency,
    }).format(amount);
  }

  // Relative time formatting
  static formatRelativeTime(date: Date | number, locale: string): string {
    const dateObj = typeof date === 'number' ? new Date(date) : date;
    const now = new Date();
    const diffInSeconds = Math.floor((now.getTime() - dateObj.getTime()) / 1000);

    const rtf = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' });

    if (diffInSeconds < 60) {
      return rtf.format(-diffInSeconds, 'second');
    } else if (diffInSeconds < 3600) {
      return rtf.format(-Math.floor(diffInSeconds / 60), 'minute');
    } else if (diffInSeconds < 86400) {
      return rtf.format(-Math.floor(diffInSeconds / 3600), 'hour');
    } else if (diffInSeconds < 2592000) {
      return rtf.format(-Math.floor(diffInSeconds / 86400), 'day');
    } else if (diffInSeconds < 31536000) {
      return rtf.format(-Math.floor(diffInSeconds / 2592000), 'month');
    } else {
      return rtf.format(-Math.floor(diffInSeconds / 31536000), 'year');
    }
  }

  // Text direction utilities
  static getTextDirection(locale: string): 'ltr' | 'rtl' {
    const rtlLocales = ['ar', 'fa', 'he', 'ur'];
    return rtlLocales.includes(locale.split('-')[0]) ? 'rtl' : 'ltr';
  }

  // Cultural color preferences
  static getCulturalColors(locale: string) {
    const colorPreferences = {
      'zh': { primary: '#DC2626', secondary: '#FCD34D' },
      'ja': { primary: '#1E90FF', secondary: '#FF7F50' },
      'ko': { primary: '#32CD32', secondary: '#FFD700' },
      'ar': { primary: '#FF4500', secondary: '#008080' },
      'hi': { primary: '#6A5ACD', secondary: '#FF69B4' },
      'fa': { primary: '#8A2BE2', secondary: '#FF6347' },
      'tr': { primary: '#20B2AA', secondary: '#FF1493' },
      'pl': { primary: '#FF8C00', secondary: '#4682B4' },
      'it': { primary: '#FF6347', secondary: '#3CB371' },
      'nl': { primary: '#6495ED', secondary: '#FF69B4' },
      'sv': { primary: '#4169E1', secondary: '#FF4500' },
      'da': { primary: '#2E8B57', secondary: '#FFD700' },
      'no': { primary: '#8B008B', secondary: '#00CED1' },
      'en': { primary: '#0000FF', secondary: '#FF0000' }, // Default to blue/red for English
    };

    return colorPreferences[locale] || colorPreferences['en'];
  }
}
```

### Advanced Translation Features

```typescript
// Translation namespace management for social network features
export const translationNamespaces = {
  // Core social features
  social: ['feed', 'post', 'profile', 'comments', 'notifications', 'search'],
  
  // User management
  auth: ['login', 'registration', 'identity', 'verification'],
  
  // Content creation and management
  content: ['create', 'edit', 'media', 'visibility', 'moderation'],
  
  // Monetization features
  monetization: ['tips', 'subscriptions', 'analytics', 'payouts'],
  
  // Privacy and security
  privacy: ['settings', 'data', 'blocking', 'reporting'],
  
  // Whistleblower protection
  whistleblower: ['identity', 'submission', 'encryption', 'safety'],
  
  // Accessibility features
  accessibility: ['screenReader', 'keyboard', 'contrast', 'fontSize'],
  
  // Error handling
  errors: ['network', 'validation', 'permission', 'system'],
  
  // Common UI elements
  common: ['navigation', 'buttons', 'forms', 'loading', 'empty'],
};

// Smart translation loading based on user journey
export function useSmartTranslations() {
  const { i18n } = useTranslation();
  const location = useLocation();
  const [loadedNamespaces, setLoadedNamespaces] = useState<Set<string>>(new Set(['common']));

  // Load translations based on current route
  useEffect(() => {
    const routeNamespaces = getNamespacesForRoute(location.pathname);
    const missingNamespaces = routeNamespaces.filter(ns => !loadedNamespaces.has(ns));

    if (missingNamespaces.length > 0) {
      Promise.all(
        missingNamespaces.map(ns => i18n.loadNamespaces(ns))
      ).then(() => {
        setLoadedNamespaces(prev => new Set([...prev, ...missingNamespaces]));
      });
    }
  }, [location.pathname, i18n, loadedNamespaces]);

  return { loadedNamespaces };
}

function getNamespacesForRoute(pathname: string): string[] {
  const routeMap: Record<string, string[]> = {
    '/': ['social', 'content'],
    '/profile': ['social', 'content', 'monetization'],
    '/settings': ['privacy', 'accessibility'],
    '/whistleblower': ['whistleblower', 'privacy'],
    '/creator-dashboard': ['monetization', 'social'],
    '/moderation': ['content', 'social'],
  };

  return routeMap[pathname] || ['common'];
}
```

### Context-Aware Translations

```typescript
// Social context translation hook
export function useSocialTranslation(context?: SocialContext) {
  const { t, i18n } = useTranslation(['social', 'common']);
  const { authState } = useAuth();

  const translateWithContext = useCallback((
    key: string,
    options: any = {},
    socialContext?: SocialContext
  ) => {
    const currentContext = socialContext || context;
    const enhancedOptions = {
      ...options,
      context: currentContext,
      user: authState.userProfile,
      lng: i18n.language,
    };

    // Add cultural context for better translations
    if (currentContext) {
      enhancedOptions.cultural_context = getCulturalContext(i18n.language, currentContext);
    }

    return t(key, enhancedOptions);
  }, [t, i18n.language, context, authState.userProfile]);

  return { t: translateWithContext, i18n };
}

interface SocialContext {
  type: 'post' | 'comment' | 'profile' | 'notification' | 'message';
  visibility?: 'public' | 'followers' | 'private';
  urgency?: 'low' | 'medium' | 'high' | 'critical';
  relationship?: 'self' | 'following' | 'follower' | 'stranger' | 'blocked';
}

function getCulturalContext(language: string, context: SocialContext): any {
  const culturalMappings = {
    'ja': {
      post: { formality: 'polite', honorifics: true },
      comment: { formality: 'casual', respectful: true },
      notification: { formality: 'polite', brief: true },
    },
    'ko': {
      post: { formality: 'polite', age_consideration: true },
      comment: { formality: 'respectful', hierarchy_aware: true },
    },
    'ar': {
      post: { formality: 'respectful', religious_sensitive: true },
      profile: { privacy_conscious: true, family_oriented: true },
    },
    'de': {
      post: { formality: 'formal', direct: true },
      comment: { precision: true, clarity: true },
    },
    'es': {
      post: { warmth: true, community_focused: true },
      notification: { personal: true, expressive: true },
    },
  };

  return culturalMappings[language]?.[context.type] || {};
}
```

### Pluralization and Gender Support

```json
// Enhanced pluralization examples for social features
// locales/en/social.json
{
  "engagement": {
    "likes": {
      "zero": "No likes yet",
      "one": "1 like",
      "other": "{{count}} likes",
      "many": "{{count}} likes"
    },
    "comments": {
      "zero": "No comments",
      "one": "1 comment", 
      "other": "{{count}} comments"
    },
    "shares": {
      "zero": "Be the first to share",
      "one": "1 share",
      "other": "{{count}} shares"
    },
    "tips": {
      "zero": "No tips received",
      "one": "{{amount}} ICP received",
      "other": "{{amount}} ICP from {{count}} supporters"
    }
  },
  "follow": {
    "action": {
      "follow": "Follow",
      "following": "Following",
      "unfollow": "Unfollow",
      "followBack": "Follow back",
      "requested": "Requested"
    },
    "status": {
      "youFollow": "You follow {{username}}",
      "followsYou": "Follows you",
      "mutualFollow": "You follow each other",
      "blockedBy": "User has blocked you",
      "youBlocked": "You have blocked this user"
    },
    "counts": {
      "followers": {
        "zero": "No followers",
        "one": "1 follower",
        "other": "{{count, number}} followers"
      },
      "following": {
        "zero": "Not following anyone",
        "one": "Following 1 person",
        "other": "Following {{count, number}} people"
      }
    }
  }
}
```

```json
// locales/ar/social.json - Arabic with RTL and cultural considerations
{
  "engagement": {
    "likes": {
      "zero": "لا توجد إعجابات بعد",
      "one": "إعجاب واحد",
      "two": "إعجابان",
      "few": "{{count}} إعجابات",
      "many": "{{count}} إعجاباً",
      "other": "{{count}} إعجاب"
    },
    "comments": {
      "zero": "لا توجد تعليقات",
      "one": "تعليق واحد",
      "two": "تعليقان", 
      "few": "{{count}} تعليقات",
      "many": "{{count}} تعليقاً",
      "other": "{{count}} تعليق"
    }
  },
  "follow": {
    "action": {
      "follow": "متابعة",
      "following": "متابَع",
      "unfollow": "إلغاء المتابعة",
      "followBack": "متابعة مرة أخرى",
      "requested": "مُرسل طلب"
    },
    "counts": {
      "followers": {
        "zero": "لا يوجد متابعون",
        "one": "متابع واحد",
        "two": "متابعان",
        "few": "{{count}} متابعين",
        "many": "{{count}} متابعاً",
        "other": "{{count}} متابع"
      }
    }
  }
}
```

### Dynamic Content Translation

```typescript
// Real-time content translation for global accessibility
export function useContentTranslation() {
  const { i18n } = useTranslation();
  const [translationCache, setTranslationCache] = useState<Map<string, any>>(new Map());

  const translateContent = useCallback(async (
    content: string,
    fromLanguage: string,
    toLanguage?: string
  ): Promise<string> => {
    const targetLang = toLanguage || i18n.language;
    const cacheKey = `${fromLanguage}-${targetLang}-${content.substring(0, 50)}`;

    // Check cache first
    if (translationCache.has(cacheKey)) {
      return translationCache.get(cacheKey);
    }

    try {
      // For MVP, use browser translation API or external service
      const translatedContent = await translateWithService(content, fromLanguage, targetLang);
      
      // Cache result
      setTranslationCache(prev => new Map(prev.set(cacheKey, translatedContent)));
      
      return translatedContent;
    } catch (error) {
      console.error('Translation failed:', error);
      return content; // Return original on failure
    }
  }, [i18n.language, translationCache]);

  const detectLanguage = useCallback(async (content: string): Promise<string> => {
    try {
      // Use language detection service or library
      return await detectContentLanguage(content);
    } catch (error) {
      return 'en'; // Default to English
    }
  }, []);

  return { translateContent, detectLanguage };
}

// Translation-aware post component
export function TranslatablePostCard({ post }: { post: Post }) {
  const { t } = useTranslation('social');
  const { translateContent, detectLanguage } = useContentTranslation();
  const [translatedContent, setTranslatedContent] = useState<string | null>(null);
  const [isTranslating, setIsTranslating] = useState(false);
  const [detectedLanguage, setDetectedLanguage] = useState<string | null>(null);

  useEffect(() => {
    // Detect content language
    detectLanguage(post.content).then(setDetectedLanguage);
  }, [post.content, detectLanguage]);

  const handleTranslate = async () => {
    if (!detectedLanguage || isTranslating) return;

    setIsTranslating(true);
    try {
      const translated = await translateContent(post.content, detectedLanguage);
      setTranslatedContent(translated);
    } catch (error) {
      console.error('Translation failed:', error);
    } finally {
      setIsTranslating(false);
    }
  };

  const showTranslateButton = detectedLanguage && 
    detectedLanguage !== i18n.language && 
    !translatedContent;

  return (
    <article className="bg-white rounded-lg shadow-sm border">
      <PostHeader author={post.author} timestamp={post.createdAt} />
      
      <div className="p-4">
        <div className="prose max-w-none">
          {translatedContent || post.content}
        </div>
        
        {detectedLanguage && detectedLanguage !== i18n.language && (
          <div className="mt-3 pt-3 border-t border-gray-100">
            {showTranslateButton ? (
              <button
                onClick={handleTranslate}
                disabled={isTranslating}
                className="text-blue-600 hover:text-blue-700 text-sm font-medium"
              >
                {isTranslating 
                  ? t('content.translating') 
                  : t('content.translateFrom', { 
                      language: getLanguageName(detectedLanguage) 
                    })
                }
              </button>
            ) : translatedContent && (
              <div className="flex items-center justify-between">
                <span className="text-gray-500 text-sm">
                  {t('content.translatedFrom', { 
                    language: getLanguageName(detectedLanguage) 
                  })}
                </span>
                <button
                  onClick={() => setTranslatedContent(null)}
                  className="text-blue-600 hover:text-blue-700 text-sm font-medium"
                >
                  {t('content.showOriginal')}
                </button>
              </div>
            )}
          </div>
        )}
      </div>
      
      <PostEngagement post={post} />
    </article>
  );
}
```

### Accessibility Integration

```typescript
// Screen reader translations
export function useScreenReaderI18n() {
  const { t } = useTranslation(['accessibility', 'social']);

  const announceToScreenReader = useCallback((
    messageKey: string,
    options: any = {},
    priority: 'polite' | 'assertive' = 'polite'
  ) => {
    const message = t(messageKey, options);
    
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', priority);
    announcement.setAttribute('aria-atomic', 'true');
    announcement.className = 'sr-only';
    announcement.textContent = message;
    
    document.body.appendChild(announcement);
    setTimeout(() => document.body.removeChild(announcement), 1000);
  }, [t]);

  const getAriaLabel = useCallback((
    key: string,
    context: any = {}
  ): string => {
    return t(`accessibility.aria.${key}`, context);
  }, [t]);

  return { announceToScreenReader, getAriaLabel };
}

// Localized screen reader announcements
export function AccessibleSocialFeed({ posts }: { posts: Post[] }) {
  const { t } = useTranslation('social');
  const { announceToScreenReader, getAriaLabel } = useScreenReaderI18n();

  const handlePostLike = useCallback(async (postId: string, isLiked: boolean) => {
    try {
      await togglePostLike(postId);
      
      announceToScreenReader(
        isLiked ? 'social.announcements.unliked' : 'social.announcements.liked',
        { postId },
        'polite'
      );
    } catch (error) {
      announceToScreenReader('errors.actionFailed', {}, 'assertive');
    }
  }, [announceToScreenReader]);

  return (
    <div 
      role="feed"
      aria-label={getAriaLabel('feed', { count: posts.length })}
      className="space-y-4"
    >
      {posts.map((post, index) => (
        <article
          key={post.id}
          role="article"
          aria-labelledby={`post-${post.id}-author`}
          aria-describedby={`post-${post.id}-content`}
          aria-posinset={index + 1}
          aria-setsize={posts.length}
        >
          <AccessiblePostCard 
            post={post}
            onLike={handlePostLike}
            ariaLabel={getAriaLabel('post', {
              author: post.author.displayName || post.author.username,
              time: formatRelativeTime(post.createdAt, i18n.language),
              engagement: `${post.likesCount} ${t('social.engagement.likes', { count: post.likesCount })}`
            })}
          />
        </article>
      ))}
    </div>
  );
}
```

### Performance Optimizations

```typescript
// Lazy loading and caching for translations
export class TranslationCache {
  private cache = new Map<string, any>();
  private loadingPromises = new Map<string, Promise<any>>();

  async loadTranslations(language: string, namespace: string): Promise<any> {
    const cacheKey = `${language}-${namespace}`;
    
    // Return cached version if available
    if (this.cache.has(cacheKey)) {
      return this.cache.get(cacheKey);
    }

    // Return existing promise if already loading
    if (this.loadingPromises.has(cacheKey)) {
      return this.loadingPromises.get(cacheKey);
    }

    // Create new loading promise
    const loadPromise = this.fetchTranslations(language, namespace);
    this.loadingPromises.set(cacheKey, loadPromise);

    try {
      const translations = await loadPromise;
      this.cache.set(cacheKey, translations);
      this.loadingPromises.delete(cacheKey);
      return translations;
    } catch (error) {
      this.loadingPromises.delete(cacheKey);
      throw error;
    }
  }

  private async fetchTranslations(language: string, namespace: string): Promise<any> {
    const response = await fetch(`/locales/${language}/${namespace}.json`);
    if (!response.ok) {
      throw new Error(`Failed to load translations: ${language}/${namespace}`);
    }
    return response.json();
  }

  // Preload critical translations
  async preloadCritical(language: string): Promise<void> {
    const criticalNamespaces = ['common', 'social', 'auth'];
    await Promise.all(
      criticalNamespaces.map(ns => this.loadTranslations(language, ns))
    );
  }

  // Clear cache when language changes
  clearCache(): void {
    this.cache.clear();
    this.loadingPromises.clear();
  }
}

// Translation fallback system
export function useTranslationFallback() {
  const { t, i18n } = useTranslation();

  const tWithFallback = useCallback((
    key: string,
    options: any = {},
    fallbackLanguages: string[] = ['en']
  ): string => {
    // Try primary language first
    const primaryTranslation = t(key, { ...options, lng: i18n.language });
    
    // If key is found, return translation
    if (primaryTranslation !== key) {
      return primaryTranslation;
    }

    // Try fallback languages
    for (const fallbackLang of fallbackLanguages) {
      const fallbackTranslation = t(key, { ...options, lng: fallbackLang });
      if (fallbackTranslation !== key) {
        console.warn(`Translation fallback used: ${key} (${i18n.language} -> ${fallbackLang})`);
        return fallbackTranslation;
      }
    }

    // Return key as last resort
    console.error(`Translation missing: ${key} for language ${i18n.language}`);
    return key;
  }, [t, i18n.language]);

  return { t: tWithFallback };
}
```

### Cultural Customization

```typescript
// Cultural adaptation for different regions
export function useCulturalAdaptation() {
  const { i18n } = useTranslation();

  const getCulturalSettings = useCallback(() => {
    const language = i18n.language;
    const region = language.split('-')[1] || language;

    return {
      // Date and time preferences
      dateFormat: getDateFormat(language),
      timeFormat: getTimeFormat(language),
      weekStartsOn: getWeekStart(region),
      
      // Number and currency
      numberFormat: getNumberFormat(language),
      currencyDisplay: getCurrencyDisplay(region),
      
      // Social preferences
      formalityLevel: getFormalityLevel(language),
      privacyExpectations: getPrivacyExpectations(region),
      communicationStyle: getCommunicationStyle(language),
      
      // Visual preferences
      colorPreferences: CulturalAdaptation.getCulturalColors(language),
      layoutDirection: CulturalAdaptation.getTextDirection(language),
      fontPreferences: getFontPreferences(language),
    };
  }, [i18n.language]);

  return { culturalSettings: getCulturalSettings() };
}

function getDateFormat(language: string): Intl.DateTimeFormatOptions {
  const formats: Record<string, Intl.DateTimeFormatOptions> = {
    'en-US': { month: 'numeric', day: 'numeric', year: 'numeric' },
    'en-GB': { day: 'numeric', month: 'numeric', year: 'numeric' },
    'de': { day: '2-digit', month: '2-digit', year: 'numeric' },
    'fr': { day: 'numeric', month: 'long', year: 'numeric' },
    'ja': { year: 'numeric', month: 'long', day: 'numeric' },
    'zh': { year: 'numeric', month: 'numeric', day: 'numeric' },
    'ar': { day: 'numeric', month: 'long', year: 'numeric' },
  };

  return formats[language] || formats['en-US'];
}

function getFormalityLevel(language: string): 'casual' | 'formal' | 'respectful' {
  const formalityMap: Record<string, 'casual' | 'formal' | 'respectful'> = {
    'en': 'casual',
    'de': 'formal',
    'ja': 'respectful',
    'ko': 'respectful',
    'fr': 'formal',
    'es': 'casual',
    'pt': 'casual',
    'ar': 'respectful',
    'fa': 'respectful',
    'hi': 'respectful',
  };

  return formalityMap[language.split('-')[0]] || 'casual';
}

function getPrivacyExpectations(region: string): 'high' | 'medium' | 'low' {
  const privacyMap: Record<string, 'high' | 'medium' | 'low'> = {
    'EU': 'high',    // GDPR region
    'DE': 'high',    // Germany - very privacy conscious
    'CH': 'high',    // Switzerland
    'JP': 'high',    // Japan
    'KR': 'medium',  // South Korea
    'US': 'medium',  // United States
    'CA': 'medium',  // Canada
    'AU': 'medium',  // Australia
    'BR': 'low',     // Brazil
    'IN': 'low',     // India
    'RU': 'low',     // Russia
    'CN': 'low',     // China
  };

  return privacyMap[region] || 'medium';
}
```

Remember: Internationalization in deCentra is crucial for global adoption, especially for users in censored regions where the platform serves as a vital communication tool. Every translation should consider cultural nuances, political sensitivities, and accessibility requirements to ensure the platform truly serves users worldwide.
